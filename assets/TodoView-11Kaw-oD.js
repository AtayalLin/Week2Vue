import{_ as x,r as a,d as V,c as u,a as o,w as r,g as w,v as i,t as m,o as d}from"./index-BjJFxDfQ.js";import{a as c}from"./index-NIGUFBhG.js";const b={class:"container","data-aos":"fade-up"},U={key:0,class:"response-box"},$={key:1,class:"token-box"},T={key:2},I={key:3},y="https://todolist-api.hexschool.io/",D={__name:"TodoView",setup(N){const t=a({email:"",password:"",nickname:""}),v=a(""),g=async()=>{if(!t.value.email||!t.value.password||!t.value.nickname){alert("請填寫所有欄位！");return}try{const l=await c.post(`${y}users/sign_up`,t.value);v.value=l.data.uid,console.log(l)}catch(l){console.error("註冊錯誤:",l)}},s=a({email:"",password:""}),k=a(""),f=async()=>{if(!s.value.email||!s.value.password){alert("請填寫所有欄位！");return}try{const l=await c.post(`${y}users/sign_in`,s.value);k.value=l.data.token,document.cookie=`customerToken=${l.data.token}; path=/;`}catch(l){console.error("登入錯誤:",l)}},p=a({nickname:"",uid:""});return V(async()=>{const l=document.cookie.replace(/(?:(?:^|.*;\s*)customerToken\s*\=\s*([^;]*).*$)|^.*$/i,"$1");if(!l){console.error("未找到 token");return}try{const e=await c.get(`${y}users/checkout`,{headers:{Authorization:l}});p.value=e.data,console.log(e)}catch(e){console.error("驗證錯誤:",e)}}),(l,e)=>(d(),u("div",b,[e[7]||(e[7]=o("h1",null,"待辦",-1)),e[8]||(e[8]=o("h2",null,"註冊功能",-1)),r(o("input",{type:"email",placeholder:"email","onUpdate:modelValue":e[0]||(e[0]=n=>t.value.email=n)},null,512),[[i,t.value.email]]),r(o("input",{type:"password",placeholder:"密碼","onUpdate:modelValue":e[1]||(e[1]=n=>t.value.password=n)},null,512),[[i,t.value.password]]),r(o("input",{type:"text",placeholder:"名稱","onUpdate:modelValue":e[2]||(e[2]=n=>t.value.nickname=n)},null,512),[[i,t.value.nickname]]),e[9]||(e[9]=o("br",null,null,-1)),o("button",{type:"button",onClick:g},"註冊"),v.value?(d(),u("div",U,[e[5]||(e[5]=o("strong",null,"註冊成功！UID: ",-1)),o("p",null,m(v.value),1)])):w("",!0),e[10]||(e[10]=o("h2",null,"登入功能",-1)),r(o("input",{type:"email",placeholder:"email","onUpdate:modelValue":e[3]||(e[3]=n=>s.value.email=n)},null,512),[[i,s.value.email]]),r(o("input",{type:"password",placeholder:"密碼","onUpdate:modelValue":e[4]||(e[4]=n=>s.value.password=n)},null,512),[[i,s.value.password]]),e[11]||(e[11]=o("br",null,null,-1)),o("button",{type:"button",onClick:f},"登入"),k.value?(d(),u("div",$,[e[6]||(e[6]=o("strong",null,"目前 Token：",-1)),o("p",null,m(k.value),1)])):w("",!0),e[12]||(e[12]=o("h2",null,"驗證",-1)),p.value.uid?(d(),u("div",T,[o("p",null,"UID: "+m(p.value.uid),1),o("p",null,"NickName: "+m(p.value.nickname),1)])):(d(),u("div",I,"尚未登入"))]))}},F=x(D,[["__scopeId","data-v-411e745e"]]);export{F as default};
