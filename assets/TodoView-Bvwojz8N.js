import{_ as b,r as u,d as V,c as p,a as o,w as i,e as k,g as f,v as d,t as a,o as m}from"./index-DFULlWWs.js";import{a as g}from"./index-NIGUFBhG.js";const T={class:"container","data-aos":"fade-up"},$={key:0,class:"token-box"},U={key:1},N={key:2},c="https://todolist-api.hexschool.io/",I={__name:"TodoView",setup(B){const n=u({email:"",password:"",nickname:""}),y=u(""),w=async()=>{try{const l=await g.post(`${c}users/sign_up`,n.value);console.log(l),y.value=l.data.uid}catch(l){console.log("錯誤!"),console.log(l)}},s=u({email:"",password:""}),v=u(""),x=async()=>{try{const l=await g.post(`${c}users/sign_in`,s.value);console.log(l),v.value=l.data.token,document.cookie=`customerToken=${l.data.token}; path=/;`}catch(l){console.log("錯誤!"),console.log(l)}},r=u({nickname:"",uid:""});return V(async()=>{const l=document.cookie.replace(/(?:(?:^|.*;\s*)customerToken\s*\=\s*([^;]*).*$)|^.*$/i,"$1"),e=await g.get(`${c}users/checkout`,{headers:{Authorization:l}});console.log(e),r.value=e.data}),(l,e)=>(m(),p("div",T,[e[6]||(e[6]=o("h1",null,"待辦",-1)),e[7]||(e[7]=o("h2",null,"註冊功能",-1)),i(o("input",{type:"email",placeholder:"email","onUpdate:modelValue":e[0]||(e[0]=t=>n.value.email=t)},null,512),[[d,n.value.email]]),i(o("input",{type:"text",placeholder:"密碼","onUpdate:modelValue":e[1]||(e[1]=t=>n.value.password=t)},null,512),[[d,n.value.password]]),i(o("input",{type:"text",placeholder:"名稱","onUpdate:modelValue":e[2]||(e[2]=t=>n.value.nickname=t)},null,512),[[d,n.value.nickname]]),e[8]||(e[8]=o("br",null,null,-1)),k(" "+a(n.value)+" ",1),e[9]||(e[9]=o("br",null,null,-1)),o("button",{type:"button",onClick:w},"註冊"),k(" "+a(y.value)+" ",1),e[10]||(e[10]=o("h2",null,"登入功能",-1)),i(o("input",{type:"email",placeholder:"email","onUpdate:modelValue":e[3]||(e[3]=t=>s.value.email=t)},null,512),[[d,s.value.email]]),i(o("input",{type:"text",placeholder:"密碼","onUpdate:modelValue":e[4]||(e[4]=t=>s.value.password=t)},null,512),[[d,s.value.password]]),e[11]||(e[11]=o("br",null,null,-1)),k(" "+a(s.value)+" ",1),e[12]||(e[12]=o("br",null,null,-1)),o("button",{type:"button",onClick:x},"登入"),v.value?(m(),p("div",$,[e[5]||(e[5]=o("strong",null,"目前 Token：",-1)),o("p",null,a(v.value),1)])):f("",!0),e[13]||(e[13]=o("h2",null,"驗證",-1)),r.value.uid?(m(),p("div",U,[o("p",null,"UID:"+a(r.value.uid),1),o("p",null,"NickName:"+a(r.value.nickname),1)])):(m(),p("div",N,"尚未登入"))]))}},F=b(I,[["__scopeId","data-v-dd1ba4f4"]]);export{F as default};
